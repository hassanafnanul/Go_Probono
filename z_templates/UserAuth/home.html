{% extends "Common/base.html" %}
{%load static%}
{%block title%}
<title>Home</title>
{%endblock title%}
{%block style%}
<style>
    .b-shadow {
        border: none;
        box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.21);
    }

    .big-card-div {
        background-color: white;
        padding: 10px;
        border-radius: 3px;
        box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.21);
    }

    .small_card_div {
        word-wrap: break-word;
        background-color: #fff;
        padding: 6px;
        box-shadow: 0px 1px 2px 0px rgba(72, 72, 72, 0.21);
        border-radius: .25rem;
    }

    .tiles {
        background: #1F2124;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);
        border-radius: 5px;
        width: calc(25% - 15px);
        /* 1/3 minus the margins (20+20) */
        padding: 5px;
        text-align: center;
        color: white;
        float: left;

        .title {
            font-size: 25px;
        }

        .icon {
            margin: 5px 0;
            font-size: 35px;
        }

        .features {
            ul {
                padding: 0;
                list-style-type: none;

                li {
                    margin: 10px 0;
                    font-size: 14px;

                    span {
                        border-bottom: 2px dotted #F6B352;
                    }
                }
            }
        }
    }
</style>
{%endblock%}
{%block content%}
{% include 'Common/sidebar.html' with data=cnav %}

<div class="app-body mt-0">
    <main class="main p-0">
        {% include 'Common/navbar.html'%}
        {%if messages%}
        {%for message in messages%}
        <script type="text/javascript">
            toastr["{{message.tags}}"]("{{message}}", "{{message.tags|upper}}");
        </script>
        {%endfor%}
        {%endif%}


        <div class="card" style=" margin: 25px; padding: 25px;">

            <!-- <div style="width: 100%; height: 123px; text-align: center;">
                Assalamualikum...
            </div> -->

            <!-- <div>
                <object type="text/html" data="http://36.255.69.139/" width="100%" height="777px"
                    style="overflow:auto; border:1px ridge orange">
                </object>
            </div> -->



            <div style="padding: 30px 20px;">
                <div class="card">

                    <div class="card-header">
                        <strong>Dashboard</strong>
                    </div>
                    <div class="card-body" style="display: flex; flex-wrap: wrap; justify-content: space-between;">

                        {% for t in tiles %}
                        <div class="tiles">

                            <div class="title">{{t.title}}</div>

                            <div class="icon">
                                <i class="{{t.icon}}"></i>
                            </div>

                            <div class="features">
                                <ul style="list-style-type: none; padding: 0;">
                                    <li style="margin: 10px 0; font-size: 19px;"><span style="color: blueviolet;"><b>{{t.data}}</b></li>
                                </ul>
                            </div>

                        </div>
                        {% endfor %}



                    </div>

                    <div class="card-header">
                        <strong>Pending Items</strong>
                    </div>
                    <div class="card-body row">

                        <div class="form_container_div p-3">
                            <div><b>Pending Lawyers</b></div>
                            <div>
                                <table class="table table-sm bg-white mt-3">
                                    <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Lawyer Name</th>
                                        <th>Current Plan</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for lawyer in p_lawyers %}
                                    <tr {% if lawyer.is_archived %}style="color: red;"{% endif %}>
                                        
                                        <td>{{lawyer.lawyer_id}}</td>
                                        <td>{{lawyer.name}}</td>
                                        <td>{{lawyer.payment_plan.name}}</td>
                                        <td>{{lawyer.status}}</td>
                
                                        <td>
                                            <a class="btn btn-sm btn-outline-danger" href="{%url 'LawyerManagement' %}?lawyer_id={{lawyer.lawyer_id}}">
                                                <i class="icon-notebook"></i> Proceed
                                            </a>
                                        </td>
                                    </tr>
                                    {%empty%}
                                    <tr class="odd">
                                        <td colspan="4" style="text-align: center;">No data available in table</td>
                                    </tr>
                                    {%endfor%}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="form_container_div p-3">
                            <div><b>Pending Payments</b></div>
                            
                            <div>
                                <table class="table table-sm bg-white mt-3">
                                    <thead>
                                    <tr>
                                        <th>Lawyer Name</th>
                                        <th>The Then Plan</th>
                                        <th>Payment Method</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for payment in payments %}
                                    <tr {% if payment.is_archived %}style="color: red;"{% endif %}>
                                        
                                        <td>{{payment.lawyer.name}}</td>
                                        <td>{{payment.chosen_payment_plan.name}}</td>
                                        <td>{{payment.payment_method.name}}</td>
                                        <td>{{payment.status}}</td>
                
                                        <td>
                                            <a class="btn btn-sm btn-outline-danger" href="{%url 'PaymentList' %}?p_id={{payment.id}}">
                                                <i class="icon-notebook"></i> Proceed
                                            </a>
                                        </td>
                                    </tr>
                                    {%empty%}
                                    <tr class="odd">
                                        <td colspan="4" style="text-align: center;">No data available in table</td>
                                    </tr>
                                    {%endfor%}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="form_container_div p-3">
                            <div><b>Pending Appointments</b></div>
                            <div>
                                <table class="table table-sm bg-white mt-3">
                                    <thead>
                                    <tr>
                                        <th>Customer Name</th>
                                        <th>Lawyer Name</th>
                                        <th>Chosen Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for appointment in p_appointments %}
                                    <tr {% if appointment.is_archived %}style="color: red;"{% endif %}>
                                        
                                        <td>{{appointment.customer.name}}</td>
                                        <td>{{appointment.lawyer.name}}</td>
                                        <td>{{appointment.chosen_date}}</td>
                                        <td>{{appointment.status}}</td>
                
                                        <td>
                                            <a class="btn btn-sm btn-outline-danger" href="{%url 'AppointmentList' %}?appointment_num={{appointment.appointment_num}}">
                                                <i class="icon-notebook"></i> Proceed
                                            </a>
                                        </td>
                                    </tr>
                                    {%empty%}
                                    <tr class="odd">
                                        <td colspan="4" style="text-align: center;">No data available in table</td>
                                    </tr>
                                    {%endfor%}
                                    </tbody>
                                </table>
                            </div>
                        </div>

                    </div>


                </div>

                {% comment %}
                <div class="row py-3">
                    <div class="col-6">
                        <canvas id="pieChart"></canvas>
                    </div>
                    <div class="col-6">
                        <canvas id="barChart"></canvas>
                    </div>
                </div>
                {% endcomment %}


            </div>

        </div>

    </main>
</div>
{% include 'Common/footer.html'%}
{%endblock%}

{%block js%}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const pieChart = document.getElementById('pieChart');
    const barChart = document.getElementById('barChart');

    new Chart(pieChart, {
        type: 'doughnut',
        data: {
            datasets: [{
                data: [10, 20, 30]
            }],
        }
    });

    new Chart(barChart, {
        type: 'bar',
        data: {
            labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
            datasets: [{
                label: '# of Votes',
                data: [12, 19, 3, 5, 2, 3],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
{%endblock%}