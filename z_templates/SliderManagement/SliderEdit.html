{% extends "Common/base.html" %}
{%load static%}
{%block title%}
<title>Slider Edit</title>
{%endblock title%}

{%block style%}
<script src="{%static 'js/ckeditor/ckeditor.js'%}"></script>
{%endblock%}

{%block content%}
{% include 'Common/sidebar.html' with data=cnav %}
<div class="app-body mt-0">
	<main class="main p-0">
		{% include 'Common/navbar.html'%}
		<div class="page_header"><a href="{%url 'SliderManagement'%}">Slider Management / </a><span
				style="color: #000000">Edit</span></div>
		

		{% include 'Common/taskbuttons.html'%}
	
		{%if messages%}
		{%for message in messages%}
		<script type="text/javascript">
			toastr["{{message.tags}}"]("{{message}}", "{{message.tags|upper}}");
		</script>
		{%endfor%}
		{%endif%}
		<div style="padding: 30px 20px;">
			<form method="post" class="bg-white p-4" enctype="multipart/form-data" autocomplete="off">
				{%csrf_token%}
				<div>
					<div class="form_container_div">
						<div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold"
								for="short_name">Short Name:</label>
							<input type="text"
								class="is-invalid form-control form-control-sm col-12 col-md-9 col-lg-9 col-xl-9"
								name="short_name" id="short_name" placeholder="Enter Slider's Short Name" required
								value="{{slider.short_name}}" maxlength="15" />
						</div>
						<div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold"
								for="name">Name:</label>
							<input type="text"
								class="is-invalid form-control form-control-sm col-12 col-md-9 col-lg-9 col-xl-9"
								name="name" id="name" placeholder="Enter Slider's Name" required value="{{slider.name}}"
								maxlength="90" />
						</div>
						<div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold"
								for="order">Order:</label>
							<input type="number"
								class="is-invalid form-control form-control-sm col-12 col-md-9 col-lg-9 col-xl-9"
								name="order" id="order" placeholder="Enter Order" required value="{{slider.order}}"
								maxlength="90" />
						</div>



						<div style="margin: 10px; text-align: center;">
							{% if slider.image %}
							<img id="prevw_img" src="{{slider.image.url}}" style="width:300px; margin-bottom: 15px;">
							{% else %}
							<img id="prevw_img" style="width:300px; margin-bottom: 15px;">
							{% endif %}
						</div>
						<div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold" for="image">Image:</label>
							<input type="file" accept="image/*" class="col-12 col-md-9 col-lg-9 col-xl-9" name="image" id="image" placeholder="Enter Slider's Image">
							<p style="color:#2e8fbd;">File size should be less than 100 kB(1920 x 600). Only jpg, png, bmp, tif, svg, jpeg files allowed.</p>
							<p style="color:#788388;"><strong>WEBP format provides better quality with less size</strong></p>
						</div>

						<div style="margin: 10px; text-align: center;">
							{% if slider.mobile_image %}
							<img id="prevw_mobile_img" src="{{slider.mobile_image.url}}" style="width:300px; margin-bottom: 15px;">
							{% else %}
							<img id="prevw_mobile_img" style="width:300px; margin-bottom: 15px;">
							{% endif %}
						</div>
						<div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold" for="mobile_image">Mobile Image:</label>
							<input type="file" accept="image/*" class="col-12 col-md-9 col-lg-9 col-xl-9" name="mobile_image" id="mobile_image" placeholder="Enter Slider's Mobile Image">
							<p style="color:#2e8fbd;">File size should be less than 100 kB(330 x 152). Only jpg, png, bmp, tif, svg, jpeg files allowed.</p>
							<p style="color:#788388;"><strong>WEBP format provides better quality with less size</strong></p>
						</div>



						<!-- <div style="margin: 10px; text-align: center;">
							<img id="prevw_img" src="\media\thumbnail_category\default_cat.png" width="120px">
						</div> -->
						<!-- <div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold"
								for="image">Image:</label>
							{% if slider.image %}
							<img id ="prevw_img" src="{{slider.image.url}}" style="width:300px; margin-bottom: 15px;">
							{% else %}
							<img id ="prevw_img" style="width:300px; margin-bottom: 15px;">
							{%endif%}
							
							<input style="all: unset; margin-bottom: 15px;" accept="image/*" type="file"
								onchange="ValidateSize(this)"
								class="form-control form-control-sm col-12 col-md-12 col-lg-12 col-xl-12" name="image"
								id="image" placeholder="Enter Slider's Image">

							<p style="color:#2e8fbd">File size should be less than 100 kB(1920 x 600)</p>
							<p style="color:#2e8fbd;"><strong>WEBP format provides better quality with less size</strong></p>
						</div>
						<div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold"
								for="mobile_image">Mobile Image:</label>
							{% if slider.mobile_image %}
							<img id ="prevw_mobile_img" src="{{slider.mobile_image.url}}" style="width:300px; margin-bottom: 15px;">
							{% else %}
							<img id ="prevw_mobile_img" style="width:300px; margin-bottom: 15px;">
							{%endif%}
							
							<input style="all: unset; margin-bottom: 15px;" accept="image/*" type="file"
								onchange="ValidateSize(this)"
								class="form-control form-control-sm col-12 col-md-12 col-lg-12 col-xl-12" name="mobile_image"
								id="mobile_image" placeholder="Enter Slider's Mobile Image">

							<p style="color:#2e8fbd">File size should be less than 100 kB(330 x 152)</p>
							<p style="color:#2e8fbd;"><strong>WEBP format provides better quality with less size</strong></p>
						</div> -->

						<div class="form-group row mx-0 d-flex align-items-center">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold" for="show">One-One restriction:</label>
							{%if slider.one_one_restriction%}
							<input style="margin-right: 5px;" type="checkbox" id="oo_restricted" name="oo_restricted" value="oo_restricted" checked>
							{%else%}
							<input style="margin-right: 5px;" type="checkbox" id="oo_restricted" name="oo_restricted" value="oo_restricted" >
							{%endif%}
							<span style="color:#2e8fbd;">(One person can order an item once only)</span>
						</div>

						
						<div class="form-group row mx-0">
							<label for="upcoming_banner_start" class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold">Upcoming Banner Date:</label>
							<input class="form-control form-control-sm col-sm-12 col-md-9 col-lg-8 col-xl-8" type="datetime-local" name="upcoming_banner_start" id="upcoming_banner_start" value="{{upcoming_start}}">
						</div>
						<div class="form-group row mx-0">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold" for="upcoming_text">Upcoming Text:</label>
							<input type="text" class="form-control form-control-sm col-12 col-md-9 col-lg-9 col-xl-9" name="upcoming_text" id="upcoming_text" value="{{slider.upcoming_text}}" placeholder="Enter Upcoming Text"  maxlength="249"/>
						</div>

						<div class="form-group row mx-0">
							<label for="start_date"
								class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold">Start
								Date :</label>
							<input class="is-invalid" type="datetime-local" name="start_date" id="start_date"
								value="{{start}}" required>
						</div>
						<div class="form-group row mx-0">
							<label for="end_date"
								class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold">End Date
								:</label>
							<input type="datetime-local" name="end_date" id="end_date" value="{{end}}">
						</div>
						<div class="form-group row mx-0 d-flex align-items-center">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label required" for="slider_type"> Select
								Slider Type :</label>
							<select class="form-control form-control-sm col-12 col-md-9 col-lg-9 col-xl-9" id="slider_type"
									name="slider_type" required>slider_type
								{%for type in slider_types%}
								{% if type.0 == slider.slider_type %}
								<option value="{{type.0}}">{{type.1}}</option>
								{% endif %}
								{% endfor %}
								<option value="">--------</option>
								{%for type in slider_types%}
								<option value="{{type.0}}">{{type.1}}</option>
								{%endfor%}
							</select>
						</div>
						<div class="form-group row mx-0 d-flex align-items-center">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label required" for="slider_participation_type"> Select
								Slider Participation Type :</label>
							<select class="form-control form-control-sm col-12 col-md-9 col-lg-9 col-xl-9" id="slider_participation_type"
									name="slider_participation_type" required>
								{% for slider_participation_type in slider_participation_types%}
								{% if slider_participation_type.0 == slider.slider_participation_type %}
								<option value="{{slider_participation_type.0}}">{{slider_participation_type.1}}</option>
								{% endif %}
								{% endfor %}
								<option value="">-------</option>
								{% for slider_participation_type in slider_participation_types%}
								<option value="{{slider_participation_type.0}}">{{slider_participation_type.1}}</option>
								{% endfor %}
							</select>
						</div>
						<div class="form-group row mx-0 d-flex align-items-center">
							<label class="col-12 col-md-3 col-lg-3 col-xl-3 col-form-label font-weight-bold" for="show">Slider Enabled:</label>
							{%if slider.is_archived%}
							<input type="checkbox" id="show" name="show" value="show">
							{%else%}
							<input type="checkbox" id="show" name="show" value="show" checked>
							{%endif%}
						</div>
					</div>
				</div>
				<div>
					<div class="form-group row mx-0">
						<label for="description"
							class="col-12 col-md-12 col-lg-12 col-xl-3 col-form-label font-weight-bold">Description:</label>
						<textarea style="min-width: 100%" id="description" name="description">
            			{{slider.description}}
					</textarea>
					</div>
				</div>
				<div class="d-flex  mt-2">
					<button type="button" class="btn btn-sm btn-secondary" onclick="javascript:window.history.back();">
						<i class="fa fa-angle-left"></i> Back
					</button>
					<div style="width: 10px"></div>
					<button type="reset" class="reset btn btn-sm btn-danger">
						<i class="fa fa-ban"></i> Reset
					</button>
					<div style="width: 10px"></div>
					<button type="submit" class="submit btn btn-sm btn-primary" id="sbmtbtn">
						<i class="fa fa-dot-circle-o"></i> Submit
					</button>
				</div>
			</form>
		</div>
	</main>
</div>
{% include 'Common/footer.html'%}

{%endblock content%}

{%block js%}
<script>

function readURL(input, output) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $(output).attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    $("#image").change(function () {
        readURL(this, '#prevw_img');
    });

	$("#mobile_image").change(function () {
		readURL(this, '#prevw_mobile_img');
	});

	var file = document.getElementById('image');
	// file.onchange = function (e) {
	// 	var ext = this.value.match(/\.([^\.]+)$/)[1];
	// 	switch (ext) {
	// 		case 'jpg':
	// 		case 'bmp':
	// 		case 'png':
	// 		case 'tif':
	// 		case 'svg':
	// 		case 'jpeg':
	// 		case 'JPG':
	// 		case 'BMP':
	// 		case 'PNG':
	// 		case 'TIF':
	// 		case 'SVG':
	// 		case 'JPEG':
	// 			break;
	// 		default:
	// 			alert('Only jpg, png, bmp, tif, svg, jpeg files allowed');
	// 			this.value = '';
	// 	}
	// 	var f = document.getElementById('image').files[0].size / 1024;
	// 	if (f > 500) {
	// 		alert('File size exceeds 500 kB');
	// 		$("#sbmtbtn").attr("disabled", true);
	// 	} else {
	// 		$("#sbmtbtn").attr("disabled", false);
	// 	}
	// };
	CKEDITOR.replace('description', {
		uiColor: 'lightgray',
		height: "180px"
	});
	$(document).ready(function(){
		$('#slider_type').val({{slider.slider_type|safe}})
		$('#slider_participation_type').val({{slider.slider_participation_type|safe}})
	})
</script>
{%endblock js%}